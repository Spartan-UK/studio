
{
  "entities": {
    "Visitor": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Visitor",
      "type": "object",
      "description": "Represents a visitor record.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Visitor entity."
        },
        "name": {
          "type": "string",
          "description": "Full name of the visitor, derived from first and last name."
        },
        "firstName": {
          "type": "string",
          "description": "First name of the visitor."
        },
        "surname": {
          "type": "string",
          "description": "Surname of the visitor."
        },
        "email": {
          "type": "string",
          "description": "Optional email address of the visitor."
        },
        "phone": {
          "type": "string",
          "description": "Optional phone number of the visitor."
        },
        "company": {
          "type": "string",
          "description": "Company the visitor represents."
        },
        "visiting": {
          "type": "string",
          "description": "Name of the person being visited."
        },
        "visitType": {
          "type": "string",
          "enum": ["office", "site"],
          "description": "Type of visit."
        },
        "vehicleReg": {
          "type": "string",
          "description": "Vehicle registration number of the visitor."
        },
        "photoURL": {
          "type": "string",
          "description": "URL of the visitor's photo stored in Firebase Storage."
        },
        "consentGiven": {
          "type": "boolean",
          "description": "Indicates whether the visitor has given GDPR consent."
        },
        "checkInTime": {
          "type": "string",
          "format": "date-time",
          "description": "Firestore Timestamp when the visitor checked in."
        },
        "checkOutTime": {
          "type": "string",
          "format": "date-time",
          "description": "Firestore Timestamp when the visitor checked out. Null if still checked in."
        },
        "checkedOut": {
            "type": "boolean",
            "description": "Indicates whether the visitor has checked out."
        }
      },
      "required": [
        "name",
        "firstName",
        "surname",
        "company",
        "visiting",
        "visitType",
        "consentGiven",
        "checkInTime",
        "checkedOut"
      ]
    },
    "Contractor": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Contractor",
      "type": "object",
      "description": "Represents a contractor record.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Contractor entity."
        },
        "name": {
          "type": "string",
          "description": "Full name of the contractor."
        },
        "company": {
          "type": "string",
          "description": "Company the contractor represents."
        },
        "email": {
          "type": "string",
          "description": "Optional email address of the contractor."
        },
        "phone": {
          "type": "string",
          "description": "Optional phone number of the contractor."
        },
        "vehicleReg": {
          "type": "string",
          "description": "Optional vehicle registration of the contractor."
        },
        "personResponsible": {
          "type": "string",
          "description": "Name of the person responsible for the contractor."
        },
        "photoURL": {
          "type": "string",
          "description": "URL of the contractor's photo stored in Firebase Storage."
        },
        "inductionComplete": {
          "type": "boolean",
          "description": "Indicates whether the contractor has completed site induction."
        },
        "rulesAgreed": {
          "type": "boolean",
          "description": "Indicates whether the contractor has agreed to site rules."
        },
        "checkInTime": {
          "type": "string",
          "format": "date-time",
          "description": "Firestore Timestamp when the contractor checked in."
        },
        "checkOutTime": {
          "type": "string",
          "format": "date-time",
          "description": "Firestore Timestamp when the contractor checked out. Null if still checked in."
        },
        "checkedOut": {
          "type": "boolean",
          "description": "Indicates whether the contractor has checked out."
        }
      },
      "required": [
        "name",
        "company",
        "personResponsible",
        "inductionComplete",
        "rulesAgreed",
        "checkInTime",
        "checkedOut"
      ]
    },
    "User": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "User",
      "type": "object",
      "description": "Represents a user record with role-based access control.",
      "properties": {
        "uid": {
          "type": "string",
          "description": "Unique identifier from Firebase Authentication, used as document ID."
        },
        "firstName": {
          "type": "string",
          "description": "First name of the user."
        },
        "surname": {
          "type": "string",
          "description": "Surname of the user."
        },
        "displayName": {
          "type": "string",
          "description": "Full name of the user."
        },
        "email": {
          "type": "string",
          "description": "Email address of the user.",
          "format": "email"
        },
        "role": {
          "type": "string",
          "description": "User role for access control.",
          "enum": ["admin", "user"]
        }
      },
      "required": ["uid", "firstName", "surname", "displayName", "email", "role"]
    },
    "Employee": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Employee",
      "type": "object",
      "description": "Represents an employee record for check-in purposes.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Employee entity."
        },
        "firstName": {
          "type": "string",
          "description": "First name of the employee."
        },
        "surname": {
          "type": "string",
          "description": "Surname of the employee."
        },
        "displayName": {
          "type": "string",
          "description": "Full name of the employee."
        },
        "email": {
          "type": "string",
          "description": "Email address of the employee.",
          "format": "email"
        }
      },
      "required": ["firstName", "surname", "displayName", "email"]
    },
    "Company": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Company",
      "type": "object",
      "description": "Represents a company record.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Company entity."
        },
        "name": {
          "type": "string",
          "description": "Name of the company."
        },
        "contact": {
          "type": "string",
          "description": "Contact person at the company."
        },
        "email": {
          "type": "string",
          "description": "Email address of the company.",
          "format": "email"
        }
      },
      "required": ["name"]
    },
    "Setting": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Setting",
      "type": "object",
      "description": "Represents application settings.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Setting entity."
        },
        "siteName": {
          "type": "string",
          "description": "Name of the site."
        },
        "badgeLogoURL": {
          "type": "string",
          "description": "URL of the badge logo stored in Firebase Storage."
        },
        "emailNotifications": {
          "type": "boolean",
          "description": "Indicates whether email notifications are enabled."
        }
      },
      "required": [
        "id",
        "siteName",
        "badgeLogoURL",
        "emailNotifications"
      ]
    }
  },
  "auth": {
    "providers": ["password", "anonymous"]
  },
  "firestore": {
    "structure": [
      {
        "path": "/visitors/{visitorId}",
        "definition": {
          "entityName": "Visitor",
          "schema": {
            "$ref": "#/backend/entities/Visitor"
          },
          "description": "Stores visitor records. Publicly writable for check-ins.",
          "params": [
            {
              "name": "visitorId",
              "description": "Unique identifier for the visitor."
            }
          ]
        }
      },
      {
        "path": "/contractors/{contractorId}",
        "definition": {
          "entityName": "Contractor",
          "schema": {
            "$ref": "#/backend/entities/Contractor"
          },
          "description": "Stores contractor records. Publicly writable for check-ins.",
          "params": [
            {
              "name": "contractorId",
              "description": "Unique identifier for the contractor."
            }
          ]
        }
      },
      {
        "path": "/users/{userId}",
        "definition": {
          "entityName": "User",
          "schema": {
            "$ref": "#/backend/entities/User"
          },
          "description": "Stores user records for application authentication. Access is controlled by roles.",
          "params": [
            {
              "name": "userId",
              "description": "Unique identifier from Firebase Auth (UID)."
            }
          ]
        }
      },
       {
        "path": "/employees/{employeeId}",
        "definition": {
          "entityName": "Employee",
          "schema": {
            "$ref": "#/backend/entities/Employee"
          },
          "description": "Stores employee records for visitor check-in selection.",
          "params": [
            {
              "name": "employeeId",
              "description": "Unique identifier for the employee."
            }
          ]
        }
      },
      {
        "path": "/companies/{companyId}",
        "definition": {
          "entityName": "Company",
          "schema": {
            "$ref": "#/backend/entities/Company"
          },
          "description": "Stores company records. Authenticated users can read/create, admins can manage.",
          "params": [
            {
              "name": "companyId",
              "description": "Unique identifier for the company."
            }
          ]
        }
      },
      {
        "path": "/settings/{settingId}",
        "definition": {
          "entityName": "Setting",
          "schema": {
            "$ref": "#/backend/entities/Setting"
          },
          "description": "Stores application settings. Only accessible by admins.",
          "params": [
            {
              "name": "settingId",
              "description": "Unique identifier for the settings document."
            }
          ]
        }
      }
    ]
  }
}

    